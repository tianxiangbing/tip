!function(t,i){"function"==typeof define&&define.amd?define("tip",["$"],i):"object"==typeof exports?module.exports=i():t.Tip=i(window.Zepto||window.jQuery||$)}(this,function(t){function i(){var t=Math.random().toString().replace(".","");this.id="Tip_"+t}return t.fn.Tip=function(s){var e=[];return t(this).each(function(){var n=t.extend({trigger:this},s),o=new i;o.init(n),e.push(o)}),t(e)},i.prototype={init:function(i){this.settings=t.extend({trigger:"",status:"hide",callback:null,tpl:'<div class="ui-tip"><div class="ui-tip-content"></div><div class="ui-tip-arrow"><i></i><em></em></div></div>',triggerEvent:"hover",offset:{x:0,y:0},width:"auto",height:"auto",zIndex:999,content:"",inViewport:!1,delegate:"body",position:"right",ajax:null},i),this.status=this.settings.status,this.position=this.settings.position,this.bindEvent()},bindEvent:function(){var i=this;if("click"==this.settings.triggerEvent)t(this.settings.delegate).on(this.settings.triggerEvent,this.settings.trigger,function(){"hide"==i.status?i.show():"show"==i.status&&i.hide()});else if("hover"==this.settings.triggerEvent){var s=null;t(this.settings.delegate).on("mouseover",this.settings.trigger,function(){i.show(),t(i.tip).hover(function(){clearTimeout(s)},function(){i.hide()})}).on("mouseout",this.settings.trigger,function(){s=setTimeout(function(){i.hide()},500)})}else t(this.settings.trigger).on(this.settings.triggerEvent,function(){i.show()})},show:function(){var i=this;this.tip||(this.tip=t(this.settings.tpl),this.tipcontent=this.tip.find(".ui-tip-content"),this.tiparrow=this.tip.find(".ui-tip-arrow"),t("body").append(this.tip)),this.tip.show().css({zIndex:this.settings.zIndex}),this.tipcontent.css({height:this.settings.height,width:this.settings.width}),this.setContent(this.settings.content),this.settings.ajax&&this.settings.ajax().done(function(t){i.setContent(t)}),this.setPosition(),this.status="show",this.start(),this.settings.callback&&this.settings.callback.call(this)},hide:function(){this.tip.remove(),this.tip=null,this.status="hide",this.stop()},start:function(){var i=this;t(window).resize(function(){i.setPosition()}).scroll(function(){i.setPosition()}),this._timer&&clearInterval(this._timer),this._timer=setInterval(function(){i.setPosition()},50)},stop:function(){clearInterval(this._timer),t(window).off("resize").off("scroll")},setPosition:function(i){var s=this;if(this.tip&&0!=this.tip.size()){var e=t(s.settings.trigger).offset(),n={h:t(s.settings.trigger).outerHeight(),w:t(s.settings.trigger).outerWidth()},o={w:this.tip.outerWidth(),h:this.tip.outerHeight()},h={y:t(window).scrollTop(),x:t(window).scrollLeft()},p={w:t(window).width(),h:t(window).height()};switch(this.tip.attr("class","ui-tip"),s.position){case"left":this.tip.x=e.left-o.w+s.settings.offset.x-10,this.tip.y=e.top+s.settings.offset.y,this.tip.css({left:this.tip.x,top:this.tip.y}),this.tip.addClass("arrow-left"),this.tip.x-h.x<0&&!i&&(this.stop(),this.position="right",this.setPosition(!0));break;case"top":this.tip.x=e.left-(o.w-n.w)/2,this.tip.y=e.top-o.h+s.settings.offset.y-10,this.tip.css({left:this.tip.x,top:this.tip.y}),this.tip.addClass("arrow-top"),this.tip.y<h.y&&!i&&(this.stop(),this.position="bottom",this.setPosition(!0));break;case"bottom":this.tip.x=e.left-(o.w-n.w)/2,this.tip.y=e.top+n.h+s.settings.offset.y+10,this.tip.css({left:this.tip.x,top:this.tip.y}),this.tip.addClass("arrow-bottom"),this.tip.y+this.tip.height()>p.h+h.y&&!i&&(this.stop(),this.position="top",this.setPosition(!0));break;default:this.tip.x=n.w+e.left+s.settings.offset.x+10,this.tip.y=e.top+s.settings.offset.y,this.tip.css({left:this.tip.x,top:this.tip.y}),this.tip.addClass("arrow-right"),this.tip.x+this.tip.outerWidth()>h.x+p.w&&!i&&(this.stop(),this.position="left",this.setPosition(!0))}}},setContent:function(t){this.tipcontent.html(t),this.setPosition()}},i});